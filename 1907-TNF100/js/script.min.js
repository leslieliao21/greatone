"use strict";$(function(){function _headerCallback(){if(console.log("%cHeader Completed",logSafeStyle),$(".menuPc"),$(".hamburger"),$(".pageHeader"),768<$(window).width()){var realHover=0;$(".menuPc > ul > li:not(.has-submenu)").hover(function(){$(".submenu").stop(!0,!1).slideUp(200),realHover=0}),$(".menuPc ul li.has-submenu").hover(function(){var submenuData=$(this).find("a.goSubmenu").data("submenu");$(this).siblings(".has-submenu").find(".submenu").slideUp(200),$("#"+submenuData).stop(!0,!1).slideDown(400),"TNF100"===submenuData?realHover=1:"infomation"===submenuData&&(realHover=2)},function(){1!=realHover&&2!=realHover||$(this).find(".submenu").show()}),$("body > *:not(header)").hover(function(){$(".submenu").stop(!0,!1).slideUp(200),realHover=0})}var url=window.location.pathname,fileName=url.substring(url.lastIndexOf("/")+1),$chLink=$(".pageHeader a.leng").eq(0),$enLink=$(".pageHeader a.leng").eq(1),enFiles=["tnf100_2019","tnf100_2019_review","tnf100_2019_rule","tnf100_2019_info"],temp=fileName.split(".")[0],hasEnPage=!1;if(temp=temp.split("_en")[0],$.each(enFiles,function(idx,val){temp===val&&(hasEnPage=!0)}),0<$(".enPage").length){var chFileName=fileName.split(".");chFileName[0]=chFileName[0].split("_en"),chFileName[0]=chFileName[0][0],chFileName=chFileName[0]+"."+chFileName[1],$enLink.attr("href","/"+fileName),$chLink.attr("href","/"+chFileName)}else{var enFileName=fileName.split(".");enFileName[0]+="_en",enFileName=enFileName[0]+"."+enFileName[1],hasEnPage?$enLink.attr("href","/"+enFileName):$enLink.attr("href","/"+enFiles[2]+"_en.html"),$chLink.attr("href","/"+fileName)}$(".pageFooter").load("/includes/_page_footer.html",_footerCallback)}function _footerCallback(){console.log("%cFooter Completed",logSafeStyle),$footer=$(".pageFooter"),0<$(".fixedSideBar").length?$("body").hasClass("tnf100Page")?$(".fixedSideBar").load("/includes/_fixed_side_bar_ntf100.html",_fixedSideBarCallback):$(".fixedSideBar").load("/includes/_fixed_side_bar.html",_fixedSideBarCallback):goMainFunction()}function _fixedSideBarCallback(){console.log("%cFixed SideBar Completed",logSafeStyle),$fixedSideBar=$(".fixedSideBar"),0<$(".climbingPage, .orienteeringPage").length&&$fixedSideBar.find(".origin").find("p").html("報名須知"),goMainFunction(),$("body").hasClass("hikingPage")&&($(".fixedSideBar .class p").html("步道簡介"),$(".fixedSideBar .origin p").html("無痕山林概念"))}function goMainFunction(){console.log("%cImages Start Loading...",logInfoStyle),$("html, body").imagesLoaded({background:!0}).always(mainFunction)}function mainFunction(){if(console.log("%cBuild Completed!",logSafeStyle),isNoSignUp=!!$body.hasClass("noSignUp"),isNoReview=!!$body.hasClass("noReview"),isNoSignUp&&delete fixedSidebarPos.signUp,isNoReview&&delete fixedSidebarPos.review,$win.on("resize",_resize).resize(),$win.on("scroll",_scroll).scroll(),0<$(".indexPage").length){$("._slick").slick({infinite:!0,fade:!0,autoplay:!0,autoplaySpeed:5e3,speed:SLICK_SPEED,pauseOnHover:!1,dots:!0,arrows:!1});var $kvListDots=$(".kvListDots"),$kvListDot=$(".kvListDots > div");$("._slick").on("beforeChange",function(event,slick,currentSlide,nextSlide){0===nextSlide||$kvListDots.hasClass("hide")&&$kvListDots.removeClass("hide"),$kvListDot.removeClass("selected"),$kvListDot.eq(nextSlide).addClass("selected")})}if(0<$(".campingPage").length&&$(".fixedSideBar li").eq(1).find("p").html("活動流程"),$(".goTop").on("click",function(evt){evt.preventDefault(),$doc.animate({scrollTop:!0},STD_DURATION)}),$(".playlist .switchVideo").on("click",function(){$(".playlist .active").removeClass("active"),$(this).addClass("active");var vid=$(this).data("vid"),vtitle=$(this).data("vtitle");$("#mainIframe").attr("src","https://www.youtube.com/embed/"+vid),$(".vName").html(vtitle)}),0<$(".indexPage").length){$kvListDot.on("click",function(){var $this=$(this),idx=$this.index();$kvListDot.removeClass("selected"),$this.addClass("selected"),$(".slick-dots > li").eq(idx).children().click()})}(0<$(".activetiesTemplate").length||0<$(".articlePage").length||0<$(".tnf100_2019Page").length)&&($(".signUpBtn").on("click",function(){$(this).stop().slideUp(STD_DURATION).next().stop().slideDown(STD_DURATION)}),$(".formBtnWrap .cancel").on("click",function(evt){evt.preventDefault()}),lightbox.init());if(0<$(".outdoorTrainingPage").length&&$(".toBannerBlock").on("click",function(){scrollToIdx(0)}),0<$(".tnf100_2019_infoPage.enPage").length){var href=location.href,headerOffset=768<winW?$(".tnf100subMenu > a").height():$(".tnf1002019_fixed li").height();(href=href.split("?")[1])&&(href=href.split("=")[1],$("html, body").animate({scrollTop:$("#"+href).offset().top-headerH-headerOffset}))}if($(".orienteeringPage .session1").on("click",function(){$(".orienteeringPage .session1").addClass("selected").siblings().removeClass("selected"),$(".orienteeringPage .titlePlace").html("台中場"),$(".orienteeringPage .actTime").html("時間：2018年9月9日下午13:30~16:30"),$(".orienteeringPage .actPlace").html("地點：台中市都會公園"),$(".orienteeringPage .googleMap").html('<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3638.9700703690855!2d120.59662741499012!3d24.207827784365843!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346915bf026727a3%3A0xe703e38159c1f9b0!2z6YO95pyD5YWs5ZyS!5e0!3m2!1szh-TW!2stw!4v1534241346330" frameborder="0" style="border:0" allowfullscreen></iframe>'),$(".orienteeringPage .soonBtn.taichung").css("display","flex").siblings().hide(),$(".orienteeringPage .forKao").hide(),$(".orienteeringPage .notKao").show()}),$(".orienteeringPage .session2").on("click",function(){$(".orienteeringPage .session2").addClass("selected").siblings().removeClass("selected"),$(".orienteeringPage .titlePlace").html("高雄場"),$(".orienteeringPage .actTime").html("時間：2018年9月15日下午13:30~16:30"),$(".orienteeringPage .actPlace").html("地點：高雄美術館/生態藝術園"),$(".orienteeringPage .googleMap").html('<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3681.9290900796095!2d120.286263!3d22.6564323!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346e0451f1321009%3A0x4f90af4e670c3d1f!2z6auY6ZuE5biC56uL576O6KGT6aSo!5e0!3m2!1szh-TW!2stw!4v1535597533631" frameborder="0" style="border:0" allowfullscreen></iframe>'),$(".orienteeringPage .soonBtn.kaohsiung").css("display","flex").siblings().hide(),$(".orienteeringPage .forKao").show(),$(".orienteeringPage .notKao").hide()}),$(".orienteeringPage .session3").on("click",function(){$(".orienteeringPage .session3").addClass("selected").siblings().removeClass("selected"),$(".orienteeringPage .titlePlace").html("台北場"),$(".orienteeringPage .actTime").html("時間：2018年9月16日下午13:30~16:30"),$(".orienteeringPage .actPlace").html("地點：新生園區"),$(".orienteeringPage .googleMap").html('<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3613.916081542377!2d121.52920021473952!3d25.070833283955093!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442a956d210e71b%3A0x8bc2d6620dacbe60!2z6Iqx5Y2a5YWs5ZyS5paw55Sf5ZyS5Y2A!5e0!3m2!1szh-TW!2stw!4v1534241460148" frameborder="0" style="border:0" allowfullscreen></iframe>'),$(".orienteeringPage .soonBtn.taipei").css("display","flex").siblings().hide(),$(".orienteeringPage .forKao").hide(),$(".orienteeringPage .notKao").show()}),$("body").hasClass("exploringPage")&&$(".reviewChu, .reviewKao").hide(),$(".exploringPage .session1").on("click",function(){$(".reviewChu, .reviewKao").hide(),$(".reviewPei").show(),$(".exploringPage .session1").addClass("selected").siblings().removeClass("selected"),$(".exploringPage .titlePlace").html("台北阪急"),$(".exploringPage ._event").html("阪急"),$(".exploringPage .actTime").html("起程時間：2019/1/20(日) 13:00~19:00"),$(".exploringPage .actPlace").html("跳躍起點：台北統一時代2F戶外廣場 (台北市信義區忠孝東路五段8號2F)"),$(".exploringPage ._eventDate").html("1/20 (日)"),$(".exploringPage .googleMap").html('<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.808592702558!2d121.56343755038158!3d25.04056898389059!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442abbbdf915b99%3A0xb501f9aa3f479cdd!2zMTEw5Y-w5YyX5biC5L-h576p5Y2A5b-g5a2d5p2x6Lev5LqU5q61OOiZnw!5e0!3m2!1szh-TW!2stw!4v1544600730603" frameborder="0" style="border:0" allowfullscreen></iframe>'),$(".forChu, .forKao").hide(),$(".forPei").show()}),$(".exploringPage .session2").on("click",function(){$(".reviewKao, .reviewPei").hide(),$(".reviewChu").show(),$(".exploringPage .session2").addClass("selected").siblings().removeClass("selected"),$(".exploringPage .titlePlace").html("新竹巨城"),$(".exploringPage ._event").html("巨城"),$(".exploringPage .actTime").html("起程時間：2019/1/19(六) 13:00~19:00"),$(".exploringPage .actPlace").html("跳躍起點：新竹Big City 遠東巨城戶外廣場 (新竹市東區中央路229號)"),$(".exploringPage ._eventDate").html("1/19 (六)"),$(".exploringPage .googleMap").html('<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3621.590088433064!2d120.97252695037655!3d24.809486083999797!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346835c4e07f9681%3A0x761cb7cee32538e7!2zMzAw5paw56u55biC5p2x5Y2A5Lit5aSu6LevMjI56Jmf!5e0!3m2!1szh-TW!2stw!4v1544600681111" frameborder="0" style="border:0" allowfullscreen></iframe>'),$(".forKao, .forPei").hide(),$(".forChu").show()}),$(".exploringPage .session3").on("click",function(){$(".reviewChu, .reviewPei").hide(),$(".reviewKao").show(),$(".exploringPage .session3").addClass("selected").siblings().removeClass("selected"),$(".exploringPage .titlePlace").html("高雄漢神巨蛋"),$(".exploringPage ._event").html("漢神"),$(".exploringPage .actTime").html("起程時間：2019/1/13(日) 13:00~19:00"),$(".exploringPage .actPlace").html("跳躍起點：高雄漢神巨蛋戶外廣場 (高雄市左營區博愛二路777號)"),$(".exploringPage ._eventDate").html("1/13(日)"),$(".exploringPage .googleMap").html('<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3681.5759829131234!2d120.30009731496122!3d22.66959258513296!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x346e0508a4e3a31d%3A0x539a045c0687f824!2zODEz6auY6ZuE5biC5bem54ef5Y2A5Y2a5oSb5LqM6LevNzc36Jmf!5e0!3m2!1szh-TW!2stw!4v1544600607489" frameborder="0" style="border:0" allowfullscreen></iframe>'),$(".forChu, .forPei").hide(),$(".forKao").show()}),$(".otherContent a").on("click",function(){$(this).parent().toggleClass("active").children(".otherBox").slideToggle(500,"linear")}),$("body").hasClass("tnf100_2019Template")){var thisPage=$("body").data("menu");$("."+thisPage).addClass("here"),$(".hamburger").on("click",function(){$(".tnf1002019_fixed").toggleClass("active")}),$(".tnf100Menu").show(),$(".menu > div:not(.tnf100Menu)").hover(function(){$(".tnf100subMenu").addClass("slideUp")},function(){$(".tnf100subMenu").removeClass("slideUp")})}var targetId=location.href.split("#")[1];setTimeout(function(){$("html, body").stop().animate({scrollTop:$("#"+targetId).offset().top-headerH-60},400)},600),($("body").hasClass("tnf100_2019_epprojectPage")||$("body").hasClass("tnf100_2019_rulePage"))&&$(window).width()<=768&&$(".tnf1002019_fixed").scrollLeft(400),($("body").hasClass("tnf100_2019_regulationPage")||$("body").hasClass("tnf100_2019_fansPage")||$("body").hasClass("tnf100_2019_lecturesPage"))&&$(window).width()<=768&&$(".tnf1002019_fixed").scrollLeft(900),0<$(".fixedSideBar").length&&$(".fixedSideBar button").on("click",function(){scrollToIdx($(this).parent().index())});var b=[],c=[73,76,79,86,69,89,79,85];$win.on("keyup",function(e){b.push(e.keyCode),b.every(function(e,n){return e===c[n]})?b.length<8||$("body").append('<img class="love" src="images/background/fish.jpg">').imagesLoaded().always(function(){$(".love").addClass("start"),setTimeout(function(){$(".love").remove()},3e3)}):b.splice(0,b.length)}),$(".loading").fadeOut(STD_DURATION,function(){setTimeout(function(){$(this).remove()},STD_DURATION)})}function _resize(){winW=$win.width(),winH=$win.height(),function(){headerH=60,560<winW&&(headerH=80);768<winW&&(headerH=100)}(),footerPos=$footer.offset().top;var device=DEVICE_LINE<winW?deviceName[0]:deviceName[1];if(device===nowDeviceName)return!1;nowDeviceName=device,console.log("%cDevice is: "+nowDeviceName+"("+winW+"px)",logInfoStyle),nowDeviceName===deviceName[1]?($(".pageHeader").hasClass("en")?$(".pageHeader.en").load("/includes/_page_header_en_m.html",_headerCallback):$(".pageHeader").load("/includes/_page_header_m.html",_headerCallback),mobileFunc(),slickInit(3)):($(".pageHeader").hasClass("en")?$(".pageHeader.en").load("/includes/_page_header_en.html",_headerCallback):$(".pageHeader").load("/includes/_page_header.html",_headerCallback),$("body").css("right",0),$(".menuMobile").menuMobile().close(),slickInit(4)),0<$(".fixedSideBar").length&&($.each(fixedSidebarPos,function(key){fixedSidebarPos[key].pos=$("."+key).offset().top}),console.log(fixedSidebarPos)),isFirstTime=!1}function slickInit(slideNum){if(0<$(".activetiesTemplate").length){var slickProp={slidesToShow:slideNum,slidesToScroll:slideNum,infinite:!1,autoplay:!1,speed:SLICK_SPEED,pauseOnHover:!0,dots:!1,arrows:!0,prevArrow:'<button class="slick-arrow arrow-prev inTheEnd"><div></div></>',nextArrow:'<button class="slick-arrow arrow-next"><div></div></>',variableWidth:!0};isFirstTime?$("._slick").slick(slickProp):($(".nowPage").html("1"),$("._slick").slick("unslick"),$("._slick").slick(slickProp),console.log("%cCarousel was reInit.",logErrorStyle));var slickLen=$(".slickItem").length,$slickArrow=$(".slick-arrow");$("._slick").on("afterChange",function(evt,slick,currentSlide){0===currentSlide?$(".arrow-prev").addClass("inTheEnd"):currentSlide===slickLen-slickLen%slideNum?$(".arrow-next").addClass("inTheEnd"):$slickArrow.hasClass("inTheEnd")&&$slickArrow.removeClass("inTheEnd"),$(".nowPage").html(Math.floor(currentSlide/slideNum)+1)}),$(".totalPage").html(Math.floor(slickLen/slideNum)+1)}}function _scroll(){nowPos=$win.scrollTop()+headerH+1;var scrollCounter=0;$.each(fixedSidebarPos,function(key,value){var valId=value.id;footerPos<=nowPos+winH&&0<!$(".tnf100Page").length?(isNoSignUp&&showNowPosAtFixedSidebar(4),isNoReview&&showNowPosAtFixedSidebar(3),(!isNoReview&&!isNoSignUp||!isNoSignUp&&isNoReview)&&showNowPosAtFixedSidebar(5),scrollCounter+=1):$win.scrollTop()+winH>=footerPos&&0<$(".tnf100Page").length?(showNowPosAtFixedSidebar(8),scrollCounter+=1):nowPos>=value.pos&&(showNowPosAtFixedSidebar(valId),scrollCounter+=1)}),0===scrollCounter&&removeFixedSidebarListClass()}function removeFixedSidebarListClass(){$(".fixedSideBar li").removeClass("selected")}function showNowPosAtFixedSidebar(idx){removeFixedSidebarListClass(),$(".fixedSideBar li").eq(idx).addClass("selected")}function scrollToIdx(idx){var gap=3===idx?4:1;$.each(fixedSidebarPos,function(key,value){value.id===idx&&$doc.animate({scrollTop:value.pos-headerH*gap},STD_DURATION)})}var winW,winH,headerH,$footer,isNoSignUp,isNoReview,$win=$(window),$doc=$("html, body"),$body=$("body"),logSafeStyle="color: green; font-weight: bold;",logErrorStyle="color: red; font-weight: bold;",logInfoStyle="color: blue;",STD_DURATION=300,footerPos=0,fixedSidebarPos={introduction:{id:0,pos:0},course:{id:1,pos:0},origin:{id:2,pos:0},googleMap:{id:3,pos:0},review:{id:4,pos:0},signUp:{id:5,pos:0}};$("body").hasClass("tnf100Page")&&(fixedSidebarPos={rules:{id:0,pos:0},information:{id:1,pos:0},registration:{id:2,pos:0},storage:{id:3,pos:0},traffic:{id:4,pos:0},internation:{id:5,pos:0},other:{id:6,pos:0},review:{id:7,pos:0},signUp:{id:8,pos:0}}),console.log("%cStart Build...",logInfoStyle),$(window).width()<=768?$(".pageHeader").hasClass("en")?$(".pageHeader.en").load("/includes/_page_header_en_m.html",_headerCallback):$(".pageHeader").load("/includes/_page_header_m.html",_headerCallback):$(".pageHeader").hasClass("en")?$(".pageHeader.en").load("/includes/_page_header_en.html",_headerCallback):$(".pageHeader").load("/includes/_page_header.html",_headerCallback);var $fixedSideBar;$(".signUp.nthuTest").load("includes/_signup.php",function(){var emailReg=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,mobileReg=/^09[0-9]{8}$/;$("#join_form .submit").click(function(e){e.preventDefault();var msg="",name=$("#join_form [name=name]").val(),sex=$("#join_form [name=gender]:checked").val(),pid=$("#join_form [name=pid]").val(),birthy=$("#join_form [name=birthy]").val(),birthm=$("#join_form [name=birthm]").val(),birthd=$("#join_form [name=birthd]").val(),email=$("#join_form [name=email]").val(),tel=$("#join_form [name=tel]").val(),size=$("#join_form [name=size]").val(),area_id=$("#join_form [name=area_id]").val();if(""==area_id?msg="請選擇場次":""==name?msg="請輸入姓名":0==$("#join_form [name=gender]:checked").length?msg="請選擇性別":""==pid?msg="請輸入身份證號":""==birthy||""==birthm||""==birthd?msg="請輸入出生日期":""!=email&&email.match(emailReg)?""!=tel&&tel.match(mobileReg)?""==size&&(msg="請輸入衣服尺寸"):msg="請輸入正確聯絡電話":msg="請輸入正確Email",msg)return alert(msg),!1;var data={name:name,sex:sex,pid:pid,birthy:birthy,birthm:birthm,birthd:birthd,email:email,tel:tel,size:size,area_id:area_id};$.ajax({url:"ajax/join.php",type:"get",dataType:"json",data:data,error:function(){return alert("系統忙碌中，請稍後再試"),!1},success:function(res){res.success?(alert("報名成功"),window.location.reload()):alert("報名失敗")}})}),lightbox.init()});var DEVICE_LINE=768,deviceName=["pc","mobile"],nowDeviceName="",SLICK_SPEED=400,isFirstTime=!0,nowPos=0});